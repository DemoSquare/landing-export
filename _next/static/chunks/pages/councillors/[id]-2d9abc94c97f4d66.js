(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{93471:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/councillors/[id]",function(){return t(99286)}])},94678:function(e,n,t){"use strict";t.d(n,{n:function(){return o}});var i=t(8100),r=t(83276);function o(e){var n=(0,r.a)(),t=e?"/councillors/".concat(e):null,o=(0,i.ZP)(t,n.fetcher),s=o.data;return{councillor:s,councillorIsLoading:!s||!e,councillorIsError:o.error}}},22259:function(e,n,t){"use strict";t.d(n,{Ae:function(){return a},Pp:function(){return l},WB:function(){return c},u$:function(){return s}});var i=t(8100),r=t(44593),o=t(83276);function s(e){var n=(0,o.a)(),t=e?"/votes/?limit=".concat(e):"/votes",r=(0,i.ZP)(t,n.fetcher),s=r.data;return{votes:s,isLoading:!s,isError:r.error}}function l(e){var n=(0,o.a)(),t=e?"/votes/councillor/".concat(e):null,r=(0,i.ZP)(t,n.fetcher),s=r.data;return{votes:s,votesIsLoading:!s||!e,votesIsError:r.error}}function c(e){var n=(0,o.a)(),t=e?"/votes/affair/".concat(e):null,r=(0,i.ZP)(t,n.fetcher),s=r.data,l=r.error;return{votes:s,votesIsLoading:!s||!e,votesIsError:l}}function a(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fr",i=function(e,n){if(n&&!n.length)return null;var i=e*recordsPerPage,r=(e+1)*recordsPerPage;return r?"/votes/?language=".concat(t,"&skip=").concat(i,"&limit=").concat(r):"/votes"},s=(0,o.a)(),l=(0,r.ZP)(i,s.fetcher),c=l.data,a=l.error,d=l.size,u=l.setSize,x=!c&&!a,h=x||d>0&&c&&"undefined"===typeof c[d-1],j=0===(null===c||void 0===c||null===(e=c[0])||void 0===e?void 0:e.length),f=j||c&&(null===(n=c[c.length-1])||void 0===n?void 0:n.length)<recordsPerPage;return{isLoading:!c,results:c,size:d,setSize:u,isError:a,isLoadingMore:h,isEmpty:j,isReachingEnd:f}}},99286:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ye}});var i=t(828),r=t(51351),o=t(85893),s=t(11163),l=t(67294),c=t(45670),a=t(17225),d=t(55050),u=t(83321),x=t(86886),h=t(40044),j=t(8100),f=t(44593),v=t(83276);var g=t(94678);var p=t(22259),m=t(66242),Z=t(44267),b=t(26447),_=t(41482),y=t(55126),P=t(41800);function E(e){var n=e.event;if("affair"===n.type)return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(y.VH,{children:["Submitted ",(0,o.jsx)(P.Z,{label:n.content.type,inline:!0})," under reference ",n.content.short_number]})})}function k(e){var n=e.event;if("affair"===n.type)return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(_.Z,{affair:n.content,outlined:!0,fullWidth:!0,hideHeader:!0})})}var C=function(e){var n=e.event;return(0,o.jsx)(m.Z,{sx:{backgroundColor:"#FAFBFF",height:"100%"},children:(0,o.jsxs)(Z.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,o.jsxs)(b.Z,{direction:"column",spacing:2,sx:{mb:5},children:[(0,o.jsx)(y.in,{datetime:n.datetime}),(0,o.jsx)(E,{event:n})]}),(0,o.jsx)(k,{event:n})]})})},I=function(e){var n=e.activities;return(0,o.jsx)(m.Z,{variant:"outlined",square:!0,sx:{border:"none",backgroundColor:"background.secondary",p:4},children:(0,o.jsx)(Z.Z,{children:(0,o.jsx)(b.Z,{direction:"column",spacing:5,children:n&&n.map((function(e,n){return(0,o.jsx)(C,{event:e},n)}))})})})},w=t(11496),z=t(87357),S=t(34386),F=t(15861),L=t(47604),W=t(67720),T=(0,w.ZP)(F.Z)({display:"inline-block",fontWeight:500,fontSize:"14px",lineHeight:"16px",color:"#262E40",backgroundColor:"#E5EDFF",padding:"3px 9px",marginBottom:"10px"});function N(e){return(0,o.jsxs)(z.Z,{sx:e.sx,children:[(0,o.jsx)(T,{children:e.title}),(0,o.jsx)(b.Z,{direction:"column",alignItems:e.alignItems,justifyContent:e.justifyContent,spacing:e.spacing?e.spacing:1,children:e.children})]})}function V(e){return(0,o.jsx)(z.Z,{sx:{px:7,py:5,backgroundColor:"background.secondary"},children:(0,o.jsx)(b.Z,{direction:"column",alignItems:e.alignItems,justifyContent:e.justifyContent,divider:(0,o.jsx)(W.Z,{orientation:"horizontal",variant:"middle",flexItem:!0}),spacing:e.spacing,sx:e.sx,children:e.children})})}var H=(0,w.ZP)(F.Z)({fontWeight:500,fontSize:"18px",lineHeight:"24px",color:"#000000"}),A=(0,w.ZP)(F.Z)({fontWeight:500,fontSize:"14px",lineHeight:"16px",color:"#60739F"}),D=(0,w.ZP)(F.Z)({fontWeight:400,fontSize:"36px",lineHeight:"30px",color:"#0062E8"}),B=(0,w.ZP)(F.Z)({fontWeight:500,fontSize:"16px",lineHeight:"18px",color:"#2B2D6A"}),M=(0,w.ZP)(F.Z)({fontWeight:500,fontSize:"24px",lineHeight:"36px",color:"#0062E8"}),R=(0,w.ZP)(F.Z)({display:"inline-block",fontWeight:500,fontSize:"12px",lineHeight:"16px",color:"#262E40",backgroundColor:"#E5EDFF",padding:"3px 9px"}),O=(0,w.ZP)(F.Z)({display:"inline-block",fontWeight:500,fontSize:"10px",lineHeight:"11px",color:"#7B94BE",backgroundColor:"#E5EDFF",padding:"2px 6px"}),X=(0,w.ZP)(F.Z)({fontWeight:500,fontSize:"13px",lineHeight:"28px",color:"#0062E8"});function q(e){var n=e.value;return(0,o.jsxs)(b.Z,{direction:"row",children:[(0,o.jsx)(M,{children:n}),(0,o.jsx)(X,{children:"%"})]})}function G(e){var n=e.councillor,t=n.mandates.split(";"),i=n.additional_mandates.split(";"),r=n.additional_activity.split(";"),s=n.mandates.length>0&&n.additional_mandates.length>0&&n.additional_activity.length>0;return(0,o.jsxs)(b.Z,{spacing:5,children:[(0,o.jsxs)(N,{title:"Personal Details",children:[(0,o.jsx)(A,{children:n.death_date?"".concat(n.birth_date,"--").concat(n.death_date):"Born ".concat(n.birth_date)}),n.birth_city?(0,o.jsx)(A,{children:n.birth_city==n.birth_canton?"From "+n.birth_city:"From "+n.birth_city+" ("+n.birth_canton+")"}):null,n.title?(0,o.jsxs)(A,{children:["Title: ",n.title]}):null,n.marital_status?(0,o.jsxs)(A,{children:[n.marital_status," ",n.number_children>0?"(".concat(n.number_children," children)"):null]}):null]}),s&&(0,o.jsxs)(N,{title:"Political Mandates",children:[t&&t.map((function(e,n){return(0,o.jsx)(A,{children:e},n)})),i&&i.map((function(e,n){return(0,o.jsx)(A,{children:e},n)})),r&&r.map((function(e,n){return(0,o.jsx)(A,{children:e},n)}))]})]})}function Y(e){var n=e.councillor,t="".concat(n.first_name," ").concat(n.last_name);return(0,o.jsx)(z.Z,{sx:{m:0},children:(0,o.jsxs)(b.Z,{alignItems:"center",direction:"column",spacing:5,children:[(0,o.jsxs)(b.Z,{alignItems:"center",direction:"column",spacing:2,children:[(0,o.jsx)(L.Z,{councillorId:n.id,councillorName:t,size:"xl"}),(0,o.jsx)(H,{children:t}),(0,o.jsx)(P.Z,{variant:"violet",label:n.council_name}),(0,o.jsxs)(b.Z,{direction:"column",alignItems:"center",spacing:1,children:[(0,o.jsx)(A,{children:n.canton_name}),(0,o.jsxs)(A,{children:[n.parl_group_name," (",n.parl_group_abbreviation,")"]}),(0,o.jsx)(A,{children:n.party_name})]})]}),(0,o.jsx)(N,{title:"Committees",sx:{mt:5},children:(0,o.jsx)(b.Z,{direction:"row",spacing:1,justifyContent:"center",alignItems:"center",sx:{flexWrap:"wrap",gap:1},children:n.committees.map((function(e,n){return(0,o.jsx)(S.Z,{title:e.name,placement:"top",arrow:!0,children:(0,o.jsx)(P.Z,{label:e.abbreviation})},n)}))})})]})})}function $(e){var n=e.label,t=e.value;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D,{children:t}),(0,o.jsx)(B,{children:n})]})}function J(e){var n=e.label,t=e.count,i=e.total;return(0,o.jsxs)(z.Z,{children:[(0,o.jsx)(R,{children:n}),(0,o.jsxs)(b.Z,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:3,children:[(0,o.jsx)(q,{value:function(e,n){return(0===e?0:e/n*100).toFixed(1)}(t,i)}),(0,o.jsxs)(O,{children:[t,"/",i]})]})]})}function K(e){var n=e.stats;return(0,o.jsx)(N,{title:"Statistics",children:(0,o.jsxs)(x.ZP,{container:!0,item:!0,spacing:1,justifyContent:"space-between",sx:{textAlign:"left"},children:[(0,o.jsx)(x.ZP,{item:!0,xs:12,sx:{mb:2},children:(0,o.jsx)($,{label:"Votes",value:n.vote_count})}),(0,o.jsx)(x.ZP,{item:!0,xs:6,children:(0,o.jsx)(J,{label:"Did not participate",count:n.did_not_participate,total:n.vote_count})}),(0,o.jsx)(x.ZP,{item:!0,xs:2}),(0,o.jsx)(x.ZP,{item:!0,xs:4,children:(0,o.jsx)(J,{label:"Excused",count:n.excused,total:n.vote_count})}),(0,o.jsx)(x.ZP,{item:!0,xs:4,children:(0,o.jsx)(J,{label:"Absention",count:n.abstention,total:n.vote_count})}),(0,o.jsx)(x.ZP,{item:!0,xs:2}),(0,o.jsx)(x.ZP,{item:!0,xs:4,children:(0,o.jsx)(J,{label:"President",count:n.president,total:n.vote_count})})]})})}var Q=function(e){var n=e.councillor,t=e.stats;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(V,{alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},spacing:10,children:[(0,o.jsx)(Y,{councillor:n}),(0,o.jsx)(G,{councillor:n}),(0,o.jsx)(K,{stats:t})]})})},U=t(66775),ee=t(47166),ne=t.n(ee),te=t(41664),ie=t.n(te),re=t(55376),oe=t(55113),se=t(2734),le=t(7906),ce=t(295),ae=t(53252),de=t(72882),ue=t(53184),xe=t(53816),he=t(72324),je=t.n(he),fe=t(11303);U.kL.register(U.uw,U.f$,U.ZL,U.Dx,U.u,U.De);var ve=ne().bind(je());function ge(e){var n=e.vote;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:ve({"cell-text":!0}),children:n.affair_title}),(0,o.jsx)("div",{className:ve({"cell-text":!0,secondary:!0}),children:n.affair_title!=n.bill_title?n.bill_title:null}),(0,o.jsxs)(b.Z,{direction:"row",spacing:5,children:[(0,o.jsx)(y.P8,{children:n.short_number}),(0,o.jsx)(y.in,{datetime:n.vote_date}),(0,o.jsx)(y.P8,{children:n.vote_title})]})]})}var pe=function(e){var n=e.outcome;return["Ja","Yes","Oui"].includes(n)?(0,o.jsx)(fe.r,{outcome:"yes"}):["Nein","No","Non"].includes(n)?(0,o.jsx)(fe.r,{outcome:"no"}):(0,o.jsx)(fe.r,{outcome:"abstention"})};function me(e){var n=e.yes,t=e.no,i=e.options,r=(0,se.Z)(),s=[r.palette.mauve[200],r.palette.pink[200]];return(0,o.jsx)(re.$Q,{width:100,height:45,options:i,data:{labels:[n,t],datasets:[{data:[n,t],borderWidth:0,backgroundColor:s,barThickness:10}]}})}var Ze=function(e){var n=e.votes,t=e.councillor,i=function(e){return{indexAxis:"y",maintainAspectRatio:!1,elements:{bar:{borderWidth:2}},scales:{x:{display:!1},y:{stacked:!0,grid:{display:!1},ticks:{color:e.palette.text.primary,font:{family:"Poppins",size:12}}}},plugins:{tooltip:{enabled:!1},legend:{display:!1}}}}((0,se.Z)());return(0,o.jsx)(m.Z,{variant:"outlined",square:!0,sx:{border:"none",backgroundColor:"background.secondary"},children:(0,o.jsx)(Z.Z,{children:(0,o.jsx)(de.Z,{component:oe.Z,children:(0,o.jsxs)(le.Z,{size:"small","aria-label":"simple table",children:[(0,o.jsx)(ue.Z,{children:(0,o.jsxs)(xe.Z,{children:[(0,o.jsx)(ae.Z,{sx:{maxWidth:450},align:"left",children:"Vote"}),(0,o.jsx)(ae.Z,{align:"center"}),(0,o.jsx)(ae.Z,{sx:{maxWidth:150},align:"left",children:t.council_name}),(0,o.jsxs)(ae.Z,{sx:{maxWidth:150},align:"left",children:["Groupe ",t.parl_group_abbreviation]})]})}),(0,o.jsx)(ce.Z,{children:n.map((function(e,n){return(0,o.jsx)(ie(),{passHref:!0,href:"/votes/".concat(e.vote_id),children:(0,o.jsxs)(xe.Z,{hover:!0,sx:{"&:hover":{cursor:"pointer"},"&:last-child td, &:last-child th":{border:0}},children:[(0,o.jsx)(ae.Z,{sx:{maxWidth:450},align:"left",children:(0,o.jsx)(ge,{vote:e})}),(0,o.jsx)(ae.Z,{align:"center",children:(0,o.jsx)(pe,{outcome:e.outcome})}),(0,o.jsx)(ae.Z,{sx:{maxWidth:150},align:"left",children:(0,o.jsx)(me,{yes:e.council_yes,no:e.council_no,options:i})}),(0,o.jsx)(ae.Z,{sx:{maxWidth:150},align:"left",children:(0,o.jsx)(me,{yes:e.parl_group_yes,no:e.parl_group_no,options:i})})]},e.id)},n)}))})]})})})})},be=t(6757);function _e(e){e=null!==e?e:(0,r.Z)(new TypeError("Cannot destructure undefined"));document.body.style.overflow="scroll";var n=(0,s.useRouter)(),t=parseInt(n.query.id),m=(0,p.Pp)(t),Z=m.votes,b=m.votesIsLoading,_=function(e){var n=(0,v.a)(),t=e?"/votes/councillor/".concat(e,"/statistics/"):null,i=(0,j.ZP)(t,n.fetcher),r=i.data;return{voteStats:r,voteStatsIsLoading:!r||!e,voteStatsIsError:i.error}}(t),y=_.voteStats,P=_.voteStatsIsLoading,E=(0,g.n)(t),k=E.councillor,C=E.councillorIsLoading,w=function(e){var n,t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,o=function(n,t){if(t&&!t.length)return null;if(!e)return null;var o=n*r,s=(n+1)*r;return"/activities/".concat(e,"/?language=").concat(i,"&skip=").concat(o,"&limit=").concat(s)},s=(0,v.a)(),l=(0,f.ZP)(o,s.fetcher),c=l.data,a=l.error,d=l.size,u=l.setSize,x=!c&&!a||d>0&&c&&"undefined"===typeof c[d-1],h=0===(null===c||void 0===c||null===(n=c[0])||void 0===n?void 0:n.length),j=h||c&&(null===(t=c[c.length-1])||void 0===t?void 0:t.length)<r;return{isLoading:!c,results:c,size:d,setSize:u,isError:a,isLoadingMore:x,isEmpty:h,isReachingEnd:j}}(t),z=w.results,S=(w.isLoading,w.size),F=w.setSize,L=w.isLoadingMore,W=w.isReachingEnd,T=(0,i.Z)(l.useState("activity"),2),N=T[0],V=T[1];return(0,o.jsx)(o.Fragment,{children:!C&&k&&(0,o.jsxs)(x.ZP,{container:!0,children:[(0,o.jsx)(x.ZP,{item:!0,xs:12,children:(0,o.jsx)(be.Z,{value:"".concat(k.first_name," ").concat(k.last_name),href:"/councillors",label:"Councillors"})}),(0,o.jsx)(x.ZP,{item:!0,xs:12,children:(0,o.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(x.ZP,{item:!0,xs:12,md:3,children:!P&&y&&(0,o.jsx)(Q,{councillor:k,stats:y})}),(0,o.jsx)(x.ZP,{item:!0,xs:12,md:9,children:(0,o.jsx)(x.ZP,{container:!0,spacing:5,children:(0,o.jsxs)(c.ZP,{value:N,children:[(0,o.jsx)(x.ZP,{item:!0,xs:12,children:(0,o.jsxs)(a.Z,{onChange:function(e,n){V(n)},"aria-label":"profile-page",children:[(0,o.jsx)(h.Z,{value:"activity",label:"Activity"}),(0,o.jsx)(h.Z,{value:"vote-history",label:"Vote history"})]})}),(0,o.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,o.jsx)(d.Z,{value:"activity",children:(0,o.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,o.jsx)(I,{activities:[].concat.apply([],z)}),(0,o.jsx)(x.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",sx:{p:5},children:(0,o.jsx)(u.Z,{onClick:function(){return F(S+1)},disabled:L||W,children:L?"Loading...":W?"":"Load more"})})]})}),(0,o.jsx)(d.Z,{value:"vote-history",children:(0,o.jsx)(x.ZP,{item:!0,xs:12,children:!b&&!P&&Z&&y&&(0,o.jsx)(Ze,{votes:Z,stats:y,councillor:k})})})]})]})})})]})})]})})}_e.acl={action:"read",subject:"acl-page"};var ye=_e},11303:function(e,n,t){"use strict";t.d(n,{r:function(){return s},s:function(){return l}});var i=t(85893),r=t(87357),o=t(41800);function s(e){var n,t;switch(e.outcome.toLowerCase()){case"yes":n="Yes",t="mauve";break;case"no":n="No",t="pink";break;case"abstention":n="Abst",t="ocean"}return(0,i.jsx)(o.Z,{label:n,variant:t,sx:{width:"52px"}})}function l(e){var n=e.outcome;return n&&["yes","no","abstention"].includes(n.toLowerCase())?(0,i.jsx)(r.Z,{width:52,height:23}):null}},6757:function(e,n,t){"use strict";var i=t(85893),r=t(41664),o=t.n(r),s=t(97790),l=t(37958),c=t(50122),a=t(12963),d=t(83321),u=t(86886),x=t(26447),h=t(15861);function j(e){var n=e.value,t=e.href,r=e.label,s=[(0,i.jsx)(o(),{href:t,passHref:!0,children:(0,i.jsx)(c.Z,{color:"inherit",children:r})},1),(0,i.jsx)(h.Z,{color:"text.primary",children:n},2)];return(0,i.jsx)(a.Z,{separator:(0,i.jsx)(l.Z,{fontSize:"small"}),"aria-label":"breadcrumb",children:s})}n.Z=function(e){var n=e.value,t=e.href,r=e.label;return(0,i.jsxs)(u.ZP,{container:!0,spacing:1,alignItems:"center",sx:{mb:5},children:[(0,i.jsx)(u.ZP,{item:!0,xs:6,children:(0,i.jsx)(j,{value:n,href:t,label:r})}),(0,i.jsx)(u.ZP,{item:!0,xs:6,children:(0,i.jsx)(x.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:(0,i.jsx)(d.Z,{variant:"contained",startIcon:(0,i.jsx)(s.Z,{}),children:"Follow"})})})]})}},72324:function(e){e.exports={vote:"VoteTable_vote__K6dSn",yes:"VoteTable_yes__BY34E",no:"VoteTable_no__dtXwC",else:"VoteTable_else__kbzfw",voteNo:"VoteTable_voteNo__nszVG",voteElse:"VoteTable_voteElse__TAzkr",shortNumber:"VoteTable_shortNumber__PrSyK","cell-text":"VoteTable_cell-text__o0XsM",secondary:"VoteTable_secondary__TyysN",dot:"VoteTable_dot__AOyJG",subject:"VoteTable_subject__zuyVI"}}},function(e){e.O(0,[757,143,411,105,291,731,482,774,888,179],(function(){return n=93471,e(e.s=n);var n}));var n=e.O();_N_E=n}]);