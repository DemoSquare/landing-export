(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{41617:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/affairs/[short_number]",function(){return n(57377)}])},94678:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(8100),i=n(83276);function o(e){var t=(0,i.a)(),n=e?"/councillors/".concat(e):null,o=(0,r.ZP)(n,t.fetcher),a=o.data;return{councillor:a,councillorIsLoading:!a||!e,councillorIsError:o.error}}},22259:function(e,t,n){"use strict";n.d(t,{Ae:function(){return l},Pp:function(){return s},WB:function(){return c},u$:function(){return a}});var r=n(8100),i=n(44593),o=n(83276);function a(e){var t=(0,o.a)(),n=e?"/votes/?limit=".concat(e):"/votes",i=(0,r.ZP)(n,t.fetcher),a=i.data;return{votes:a,isLoading:!a,isError:i.error}}function s(e){var t=(0,o.a)(),n=e?"/votes/councillor/".concat(e):null,i=(0,r.ZP)(n,t.fetcher),a=i.data;return{votes:a,votesIsLoading:!a||!e,votesIsError:i.error}}function c(e){var t=(0,o.a)(),n=e?"/votes/affair/".concat(e):null,i=(0,r.ZP)(n,t.fetcher),a=i.data,s=i.error;return{votes:a,votesIsLoading:!a||!e,votesIsError:s}}function l(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fr",r=function(e,t){if(t&&!t.length)return null;var r=e*recordsPerPage,i=(e+1)*recordsPerPage;return i?"/votes/?language=".concat(n,"&skip=").concat(r,"&limit=").concat(i):"/votes"},a=(0,o.a)(),s=(0,i.ZP)(r,a.fetcher),c=s.data,l=s.error,u=s.size,d=s.setSize,x=!c&&!l,f=x||u>0&&c&&"undefined"===typeof c[u-1],h=0===(null===c||void 0===c||null===(e=c[0])||void 0===e?void 0:e.length),m=h||c&&(null===(t=c[c.length-1])||void 0===t?void 0:t.length)<recordsPerPage;return{isLoading:!c,results:c,size:u,setSize:d,isError:l,isLoadingMore:f,isEmpty:h,isReachingEnd:m}}},57377:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return pe}});var r=n(51351),i=n(29815),o=n(85893),a=n(41664),s=n.n(a),c=n(11163),l=n.n(c),u=n(67294),d=n(8100),x=n(37958),f=n(11496),h=n(50122),m=n(12963),p=n(66242),j=n(44267),g=n(86886),v=n(26447),Z=n(15861),_=n(83276);function b(e){var t=(0,_.a)(),n=e?"/affairs/".concat(e):null,r=(0,d.ZP)(n,t.fetcher),i=r.data;return{affair:i,isLoading:!i,isError:r.error}}var P=n(72613),w=n(95781),y=n(99199),S=n(86467),F=n(75341),z=n(24238),E=n(87357),I=n(98456),L=n(94678),N=n(22259),H=n(47604),W=n(55126),C=n(41800),k=n(24683),M=n(80703),T=n(60058),A=n(91379),B=(0,f.ZP)(Z.Z)({fontWeight:500,fontSize:"18px",lineHeight:"24px",color:"#000000"}),D=(0,f.ZP)(Z.Z)((function(e){e.theme;return{lineHeight:"16px",fontSize:"12px",color:"#000000"}})),R=(0,f.ZP)(Z.Z)((function(e){e.theme;return{lineHeight:"16px",fontSize:"12px",color:"#000000",textDecoration:"underline","&:hover":{cursor:"pointer"}}})),Y=(0,f.ZP)(D)((function(e){var t=e.theme;return{fontStyle:"italic",color:t.palette.grey[800],marginTop:t.spacing(2),marginBottom:t.spacing(6)}})),q=(0,f.ZP)(R)((function(e){return{marginBottom:e.theme.spacing(6)}}));function O(e){var t=e.affair;return(0,o.jsx)(g.ZP,{container:!0,children:(0,o.jsxs)(g.ZP,{item:!0,sx:{mt:5},children:[(0,o.jsx)(M.Z,{label:"Affair",value:t.short_number,icon:(0,o.jsx)(z.Z,{fontSize:"small"})}),(0,o.jsx)(M.Z,{label:"Submission Date",value:(0,A.p)(t.submission_date),icon:(0,o.jsx)(S.Z,{fontSize:"small"})}),t.council_name&&(0,o.jsx)(M.Z,{label:"Council",value:t.council_name,icon:(0,o.jsx)(P.Z,{fontSize:"small"})}),t.session_name&&(0,o.jsx)(M.Z,{label:"Session",value:t.session_name,icon:(0,o.jsx)(y.Z,{fontSize:"small"})}),t.current_state&&(0,o.jsx)(M.Z,{label:"State",value:t.current_state,icon:(0,o.jsx)(F.Z,{fontSize:"small"})})]})})}function U(e){var t=e.affair,n=e.sx,r=(0,L.n)(t.author_id),i=r.councillor,a=r.councillorIsLoading,c={pathname:"/councillors/[id]",query:{id:t.author_id}};return(0,o.jsx)(o.Fragment,{children:!a&&i&&(0,o.jsxs)(v.Z,{direction:"row",spacing:4,alignItems:"center",sx:n,children:[(0,o.jsx)(H.Z,{councillorId:t.author_id,size:"xs",href:c}),(0,o.jsx)(E.Z,{sx:{mb:0},children:(0,o.jsx)(v.Z,{direction:"column",spacing:1,alignItems:"flex-start",children:(0,o.jsxs)(v.Z,{direction:"column",spacing:0,children:[(0,o.jsx)(s(),{href:c,passHref:!0,children:(0,o.jsx)(W.VH,{asLink:!0,children:"".concat(i.first_name," ").concat(i.last_name)})}),(0,o.jsx)(W.P8,{children:i.canton_name}),(0,o.jsx)(W.P8,{children:i.parl_group_name})]})})})]})})}function X(e){var t=e.affair,n=e.sx;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(W.wP,{sx:n,children:["Submitted by ",(0,o.jsx)(W._3,{children:t.author_name})]})})}function V(e){var t=e.affair,n=e.sx,r=void 0===n?{}:n;switch(t.author_type){case"councillor":return(0,o.jsx)(U,{affair:t,sx:r});case"committee":case"parl_group":case"canton":return(0,o.jsx)(X,{affair:t,sx:r})}}function $(e){var t=e.affair,n=(0,N.WB)(t.short_number),r=n.votes,i=n.votesIsLoading;return(0,o.jsxs)(k.Z,{children:[(0,o.jsx)(B,{sx:{mb:4},children:"Latest vote"}),!i&&r?r.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.Z,{vote:r[0],variant:"compact",whiteBg:!0,sx:{mb:2}}),(0,o.jsx)(s(),{href:"/votes/".concat(r[0].vote_id),passHref:!0,children:(0,o.jsx)(q,{children:"See vote details"})})]}):(0,o.jsx)(Y,{children:"No votes for this affair."}):(0,o.jsx)(E.Z,{sx:{mb:6},display:"flex",alignItems:"center",justifyContent:"center",children:(0,o.jsx)(I.Z,{})})]})}function G(e){var t=e.meetings;return(0,o.jsx)(v.Z,{direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:1,sx:{mt:.5},children:t&&t.map((function(e){return(0,o.jsxs)(E.Z,{children:[(0,o.jsx)(D,{children:e.date}),(0,o.jsx)(s(),{href:"/committees/".concat(e.committee_abbreviation),passHref:!0,children:(0,o.jsx)(R,{children:e.committee_name})})]},e.meeting_id)}))})}function J(e){var t=e.meetings;return 0===t.length?null:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(M.Z,{label:"Upcoming dates",icon:(0,o.jsx)(w.Z,{fontSize:"small"}),children:(0,o.jsx)(G,{meetings:t})})})}var K=function(e){var t=e.affair;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(p.Z,{sx:{p:5},spacing:5,children:[(0,o.jsx)(C.Z,{label:t.type}),(0,o.jsx)(B,{sx:{mt:2},children:t.title}),(0,o.jsx)(V,{affair:t,sx:{mt:5}}),(0,o.jsx)(O,{affair:t}),(0,o.jsx)(J,{meetings:t.upcoming_meetings}),(0,o.jsx)($,{affair:t})]})})},Q=n(41482),ee=n(82670),te=n(828),ne=n(82222),re=n(30653),ie=n(59632),oe=n.n(ie),ae=n(74196),se=n(2734),ce=(0,f.ZP)(ae.Z,{shouldForwardProp:function(e){return"arrow"!==e}})((function(e){e.theme,e.arrow;return{'&[data-popper-placement*="bottom"]':{"& .MuiPopper-arrow":{top:"-0.75em",width:"1.5em","&::before":{top:"100%",borderWidth:"1px 0 0 1px"}}},'&[data-popper-placement*="top"]':{"& .MuiPopper-arrow":{bottom:"-0.75em",width:"1.5em","&::before":{top:0,borderWidth:"0 1px 1px 0"}}},'&[data-popper-placement*="right"]':{"& .MuiPopper-arrow":{left:"-0.75em",height:"1.5em","&::before":{left:"100%",borderWidth:"0 0 1px 1px"}}},'&[data-popper-placement*="left"]':{"& .MuiPopper-arrow":{right:"-0.75em",height:"1.5em","&::before":{left:0,borderWidth:"1px 1px 0 0"}}}}})),le=(0,f.ZP)("div")({position:"absolute",width:"0.75em",height:"0.75em","&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(45deg)",width:"0.75em",height:"0.75em",borderStyle:"solid",borderColor:"#DFE3EC",background:"#FFF"}}),ue=function(e){var t=e.htmlText,n=((0,se.Z)(),(0,te.Z)(u.useState(null),2)),r=n[0],i=n[1],a=(0,u.useState)(null),s=a[0],c=a[1],l=b(s?s.textContent:null),d=l.affair,x=l.isLoading,f=(0,u.useState)(!1),h=f[0],m=f[1],p=(0,u.useRef)(h);p.value=h;var j=Boolean(s),g=/[^\.]([0-9]{2}\.[0-9]{3,4})[^\.]/g,v=/([0-9]{2}\.[0-9]{3,4})/g,Z=function(e){c(e.currentTarget)},_=function(){setTimeout((function(){p.value||c(null)}),100)},P=function(e){var t="/affairs/".concat(e);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.Z,{inline:!0,label:e,href:t,"aria-describedby":e,onMouseEnter:Z,onMouseLeave:_}),(0,o.jsx)(ce,{id:e,placement:"top",open:j,anchorEl:s,modifiers:[{name:"arrow",enabled:!0,options:{element:r}},{name:"offset",options:{offset:[0,8]}}],children:!x&&(0,o.jsxs)(E.Z,{onMouseEnter:function(){m(!0)},onMouseLeave:function(){m(!1),c(null)},children:[(0,o.jsx)(le,{ref:i,className:"MuiPopper-arrow"}),(0,o.jsx)(Q.Z,{affair:d,outlined:!0})]})})]})},w=function(e){return["string","number"].includes("undefined"===typeof e?"undefined":(0,ne.Z)(e))?function(e){return g.test(e)?oe()(e,v,(function(e,t){return P(e)})):e}(e):(0,ee.Z)(e,Array)?e.map(w):"object"===typeof e&&e?u.cloneElement(e,{children:w(e.props.children)}):void 0};return function(e){var t=(0,re.ZP)(e);return w(t)}(t)},de=(0,f.ZP)(Z.Z)({fontWeight:500,fontSize:"14px",lineHeight:"20px",color:"#000000"}),xe=(0,f.ZP)(Z.Z)({fontWeight:400,fontSize:"13px",lineHeight:"20px",color:"#000000"});function fe(e){var t=e.name,n=[(0,o.jsx)(s(),{href:"/affairs",passHref:!0,children:(0,o.jsx)(h.Z,{color:"inherit",children:"Affairs"})},1),(0,o.jsx)(Z.Z,{color:"text.primary",children:t},2)];return(0,o.jsx)(m.Z,{separator:(0,o.jsx)(x.Z,{fontSize:"small"}),"aria-label":"breadcrumb",children:n})}function he(e){var t=e.affair;return(0,o.jsx)(g.ZP,{container:!0,spacing:1,alignItems:"center",sx:{mb:5},children:(0,o.jsx)(g.ZP,{item:!0,xs:6,children:(0,o.jsx)(fe,{name:t.short_number})})})}function me(e){e=null!==e?e:(0,r.Z)(new TypeError("Cannot destructure undefined"));var t=function(e){var t=e.title,r=e.text,i=e.fieldName;return r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(v.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mt:3},children:[(0,o.jsx)(de,{children:t}),n(i)]}),(0,o.jsx)(xe,{children:(0,o.jsx)(ue,{htmlText:r})})]}):null},n=function(e){var t,n=m?m.filter((function(t){return e in t.changes})):[];if(0===n.length)return null;var r=n.map((function(e){return new Date(e.created_at)})),a=new Date((t=Math).max.apply(t,(0,i.Z)(r)));return(0,o.jsx)(C.Z,{label:"Updated ".concat((0,A.p)(a))})},a=b(l().query.short_number),s=a.affair,c=a.isLoading,u=function(e){var t=(0,_.a)(),n=e?"/search/?query=".concat(e,"&limit=8"):null,r=(0,d.ZP)(n,t.fetcher),i=r.data;return r.error,{relatedIsLoading:!i||!e,affairs:i?i.affairs:[],councillors:i?i.councillors:[]}}(null===s||void 0===s?void 0:s.title),x=u.affairs,f=(u.councillors,u.relatedIsLoading),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr",n=(0,_.a)(),r=e?"/updates/affair/".concat(e,"?language=").concat(t):null,i=(0,d.ZP)(r,n.fetcher),o=i.data,a=i.error;return{updates:o,updateIsLoading:!o,isError:a}}(null===s||void 0===s?void 0:s.id),m=h.updates;h.updateIsLoading;return(0,o.jsx)(o.Fragment,{children:!c&&(0,o.jsxs)(g.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(g.ZP,{item:!0,xs:12,children:(0,o.jsx)(he,{affair:s})}),(0,o.jsx)(g.ZP,{item:!0,xs:12,children:(0,o.jsxs)(g.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(g.ZP,{item:!0,xs:12,md:3,children:(0,o.jsx)(K,{affair:s})}),(0,o.jsx)(g.ZP,{item:!0,xs:12,md:9,children:(0,o.jsx)(p.Z,{sx:{height:"100%"},children:(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(t,{title:"Description",text:null===s||void 0===s?void 0:s.initial_situation,fieldName:"description"}),(0,o.jsx)(t,{title:"Proceedings",text:null===s||void 0===s?void 0:s.proceedings,fieldName:"proceedings"}),(0,o.jsx)(t,{title:"Draft Text",text:null===s||void 0===s?void 0:s.draft_text,fieldName:"draft_text"}),(0,o.jsx)(t,{title:"Submitted Text",text:null===s||void 0===s?void 0:s.submitted_text,fieldName:"submitted_text"}),(0,o.jsx)(t,{title:"Reason",text:null===s||void 0===s?void 0:s.reason_text,fieldName:"reason_text"}),(0,o.jsx)(t,{title:"Documentation",text:null===s||void 0===s?void 0:s.documentation_text,fieldName:"documentation_text"}),(0,o.jsx)(t,{title:"Motion",text:null===s||void 0===s?void 0:s.motion_text,fieldName:"motion_text"}),(0,o.jsx)(t,{title:"Federal council response",text:null===s||void 0===s?void 0:s.federal_council_response_text,fieldName:"federal_council_response_text"})]})})})]})}),(0,o.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,o.jsx)(v.Z,{direction:"row",justifyContent:"space-between",sx:{mb:3},children:(0,o.jsx)(Z.Z,{sx:{mr:1,fontSize:"18px",lineHeight:"14px",weight:"500"},children:"Related affairs"})}),(0,o.jsx)(g.ZP,{container:!0,spacing:4,alignItems:"stretch",children:!f&&x.map((function(e){return(0,o.jsx)(g.ZP,{item:!0,md:3,children:(0,o.jsx)(Q.Z,{affair:e})},e.id)}))})]})]})})}me.acl={action:"read",subject:"acl-page"};var pe=me},11303:function(e,t,n){"use strict";n.d(t,{r:function(){return a},s:function(){return s}});var r=n(85893),i=n(87357),o=n(41800);function a(e){var t,n;switch(e.outcome.toLowerCase()){case"yes":t="Yes",n="mauve";break;case"no":t="No",n="pink";break;case"abstention":t="Abst",n="ocean"}return(0,r.jsx)(o.Z,{label:t,variant:n,sx:{width:"52px"}})}function s(e){var t=e.outcome;return t&&["yes","no","abstention"].includes(t.toLowerCase())?(0,r.jsx)(i.Z,{width:52,height:23}):null}},80703:function(e,t,n){"use strict";var r=n(85893),i=n(11496),o=n(87357),a=n(26447),s=n(15861),c=(0,i.ZP)(s.Z)({fontWeight:400,fontSize:"12px",lineHeight:"16px",color:"#60739F"}),l=(0,i.ZP)(s.Z)({fontWeight:400,fontSize:"13px",lineHeight:"16px",color:"#000000"}),u=(0,i.ZP)(o.Z)((function(e){return{fontSize:"3px",color:e.theme.palette.primary.main}}));t.Z=function(e){var t=e.icon,n=e.label,i=e.value,o=e.children;return(0,r.jsxs)(a.Z,{direction:"row",sx:{mb:3},children:[(0,r.jsx)(u,{children:t}),(0,r.jsxs)(a.Z,{direction:"column",sx:{ml:1},children:[(0,r.jsx)(c,{children:n}),o||(0,r.jsx)(l,{children:i})]})]})}},60058:function(e,t,n){"use strict";var r=n(85893),i=n(11496),o=n(87357),a=n(67720),s=n(26447),c=n(15861),l=n(11303),u=(0,i.ZP)(c.Z)({marginTop:5,fontWeight:600,fontSize:"12px",lineHeight:"10px",color:"#54658C",textAlign:"center"}),d=(0,i.ZP)(c.Z)({fontWeight:500,fontSize:"13px",lineHeight:"16px",color:"#000000"}),x=(0,i.ZP)(c.Z)({fontWeight:400,fontSize:"14px",lineHeight:"18px",color:"#60739F"}),f=(0,i.ZP)(c.Z)({fontWeight:600,fontSize:"14px",lineHeight:"20px",color:"#000000"}),h=(0,i.ZP)(c.Z)({fontWeight:300,fontSize:"14px",lineHeight:"20px",color:"#000000"});function m(e){var t=e.count;return(0,r.jsxs)(x,{children:["Excused/absent: ",t," councillors"]})}function p(e){var t=e.vote,n=e.variant,i=e.whiteBg,c={fontSize:"compact"===n?"12px":"14px",lineHeight:"compact"===n?"16px":"20px"},l={xs:"100%",md:"compact"===n?"100%":"33%"};return(0,r.jsx)(r.Fragment,{children:t.meaning_yes&&t.meaning_no&&(0,r.jsx)(o.Z,{backgroundColor:i?"#FFF":"#FAFBFF",p:4,sx:{maxWidth:l},children:(0,r.jsxs)(s.Z,{direction:"row",spacing:5,divider:(0,r.jsx)(a.Z,{orientation:"vertical",flexItem:!0}),children:[(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(f,{sx:c,children:"Yes"}),(0,r.jsx)(h,{sx:c,children:t.meaning_yes})]}),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(f,{sx:c,children:"No"}),(0,r.jsx)(h,{sx:c,children:t.meaning_no})]})]})})})}function j(e){var t,n,i=e.value,a=e.width,s=e.type,c=e.variant,l="compact"===c?40:10;switch(s){case"yes":t="#8D91FF",n=i>l?"Yes: "+i:i;break;case"abstention":t="#A3E4F9",n=i>l?"Abst: "+i:i;break;case"no":t="#F9A3E1",n=i>l?"No: "+i:i}return(0,r.jsxs)(o.Z,{width:a,flexDirection:"column",children:[(0,r.jsx)(o.Z,{width:"100%",height:"compact"===c?12:20,backgroundColor:t,borderRadius:"3px"}),(0,r.jsx)(u,{children:n})]})}function g(e){var t=e.vote,n=e.variant,i=t.yes_count+t.abstention_count+t.no_count,a=t.absence_count+t.excused_count+t.did_not_participate_count;return(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(s.Z,{direction:"row",spacing:1,sx:{mb:2},children:[t.yes_count>0?(0,r.jsx)(j,{value:t.yes_count,width:t.yes_count/i,type:"yes",variant:n}):(0,r.jsx)(r.Fragment,{}),t.abstention_count?(0,r.jsx)(j,{value:t.abstention_count,width:t.abstention_count/i,type:"abstention",variant:n}):(0,r.jsx)(r.Fragment,{}),t.no_count?(0,r.jsx)(j,{value:t.no_count,width:t.no_count/i,type:"no",variant:n}):(0,r.jsx)(r.Fragment,{})]}),"compact"===n?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(m,{count:a})]})}t.Z=function(e){var t=e.vote,n=e.variant,i=void 0===n?"default":n,o=e.whiteBg,a=void 0!==o&&o,c=e.sx,u=void 0===c?{}:c,x=t.vote_result>.5?"Yes":"No",f=(100*t.vote_result).toFixed(0);return(0,r.jsxs)(s.Z,{direction:"column",spacing:"compact"===i?2:5,sx:u,children:[(0,r.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(l.r,{outcome:x}),(0,r.jsxs)(d,{children:[f,"%",t.vote_title?" \u2013 "+t.vote_title:""]})]}),(0,r.jsx)(g,{vote:t,variant:i}),(0,r.jsx)(p,{vote:t,variant:i,whiteBg:a})]})}},50247:function(){}},function(e){e.O(0,[143,105,72,482,774,888,179],(function(){return t=41617,e(e.s=t);var t}));var t=e.O();_N_E=t}]);