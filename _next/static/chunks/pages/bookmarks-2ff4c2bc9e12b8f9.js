(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{3007:function(n,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bookmarks",function(){return i(40771)}])},22453:function(n,e,i){"use strict";i.d(e,{gm:function(){return o},kf:function(){return s}});var t=i(8100),r=i(44593),a=i(83276);function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"submitted-desc",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=(0,a.a)(),r="/affairs/?order=".concat(n,"&limit=").concat(e),s=(0,t.ZP)(r,i.fetcher),o=s.data,c=s.error;return{affairs:o,isLoading:!o,isError:c}}function o(n){var e,i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=function(e,i){if(i&&!i.length)return null;var r=e*t,a=(e+1)*t;return"/affairs/?order=".concat(n||"submitted-desc","&skip=").concat(r,"&limit=").concat(a)},o=(0,a.a)(),c=(0,r.ZP)(s,o.fetcher),d=c.data,l=c.error,h=c.mutate,u=c.size,x=c.setSize,f=!d&&!l,j=f||u>0&&d&&"undefined"===typeof d[u-1],m=0===(null===d||void 0===d||null===(e=d[0])||void 0===e?void 0:e.length),g=m||d&&(null===(i=d[d.length-1])||void 0===i?void 0:i.length)<t;return{results:d,isLoading:!d,isError:l,mutate:h,size:u,setSize:x,isLoadingMore:j,isEmpty:m,isReachingEnd:g}}},40771:function(n,e,i){"use strict";i.r(e),i.d(e,{default:function(){return V}});var t=i(828),r=i(51351),a=i(29815),s=i(85893),o=i(67294),c=i(47116),d=i.n(c),l=i(94492),h=i(16023),u=i(65165),x=i(26447),f=i(33454),j=i(96420),m=i(83321),g=i(86886),p=i(22453),Z=i(41482),b=i(25675),v=i.n(b),w=i(62152),k=i(15861),_=i(11496),y=i(87357),z=function(){return(0,s.jsx)(y.Z,{sx:{width:"100%",position:"fixed",zIndex:9,top:0},children:(0,s.jsx)(y.Z,{sx:{margin:"0 auto",maxWidth:"1200px"},children:(0,s.jsxs)(x.Z,{direction:"row",sx:{alignItems:"center",justifyContent:"space-between",height:30},children:[(0,s.jsx)(y.Z,{sx:{mt:2},children:(0,s.jsx)(v(),{src:w.Z,height:20,width:120,alt:"DemoSquare"})}),(0,s.jsx)(k.Z,{variant:"caption",children:(new Date).toLocaleDateString()})]})})})},S=function(){return(0,s.jsx)(y.Z,{sx:{width:"100%",position:"fixed",zIndex:9,bottom:0},children:(0,s.jsx)(y.Z,{sx:{margin:"0 auto",maxWidth:"1200px"},children:(0,s.jsx)(x.Z,{direction:"row",sx:{alignItems:"center",justifyContent:"center",height:30},children:(0,s.jsx)("a",{href:"https://www.demosquare.ch",style:{textDecoration:"none"},children:(0,s.jsx)(k.Z,{variant:"caption",children:"www.demosquare.ch"})})})})})},C=(0,_.ZP)(y.Z)((function(){return{"@page":{margin:"50px"}}})),P=(0,o.forwardRef)((function(n,e){return(0,s.jsx)(y.Z,{sx:{display:"none"},children:(0,s.jsxs)(C,{ref:e,children:[(0,s.jsx)(z,{}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:(0,s.jsx)(y.Z,{sx:{height:"100px"}})})})}),n.children,(0,s.jsx)("tfoot",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:(0,s.jsx)(y.Z,{sx:{height:"100px"}})})})})]}),(0,s.jsx)(S,{})]})})})),E=i(55126),L=i(41664),W=i.n(L),I=i(63343),D=i(93946),N=i(66242),B=i(7906),T=i(295),F=i(53252),O=i(72882),R=i(53184),q=i(53816),M=i(83276),X=i(41800),A=i(91379),H=[{id:"title",label:"title",minWidth:100},{id:"author_name",label:"submitted by",minWidth:100},{id:"status",label:"status",minWidth:100},{id:"bookmarked",label:"",minWidth:40}];function J(n){var e=n.row;return null===e.author_id?(0,s.jsx)(k.Z,{fontSize:"inherit",sx:{mb:1},children:e.author_name}):(0,s.jsx)(W(),{href:"/councillors/".concat(e.author_id),legacyBehavior:!0,children:(0,s.jsx)("a",{style:{textDecoration:"none"},children:(0,s.jsx)(k.Z,{fontSize:"inherit",sx:{mb:1},children:e.author_name})})})}function G(n){var e=n.row;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W(),{href:"/affairs/".concat(e.id),legacyBehavior:!0,children:(0,s.jsx)("a",{style:{textDecoration:"none"},children:(0,s.jsx)(k.Z,{fontSize:"inherit",sx:{mb:1},children:e.title})})}),(0,s.jsxs)(x.Z,{direction:"row",spacing:4,children:[(0,s.jsx)(E.P8,{children:e.short_number}),(0,s.jsx)(E.in,{datetime:e.submission_date}),(0,s.jsx)(E.P8,{children:e.type})]})]})}function K(n){var e=n.row;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{sx:{fontWeight:"500",fontSize:"inherit",mb:1},children:e.status}),(0,s.jsx)(x.Z,{direction:"row",spacing:4,children:(0,s.jsx)(E.P8,{children:(0,A.p)(e.status_date)})})]})}var Q=function(n){var e=n.affairs,i=n.isLoading,t=n.onBookmarkChange,r=void 0===t?function(){}:t,a=n.print,o=void 0!==a&&a,c=(0,M.a)(),d=function(n,e){var i=n[e],t=n.id.toString();if("short_number"==e){var a=o?"16px":"20px";return(0,s.jsx)(X.Z,{label:i,sx:{fontSize:"inherit",height:a}})}return"author_name"==e?(0,s.jsx)(J,{row:n}):"title"==e?(0,s.jsx)(G,{row:n}):"status"==e?(0,s.jsx)(K,{row:n}):"bookmarked"==e?(0,s.jsx)(D.Z,{"aria-label":"delete",size:"small",onClick:function(){return function(n){n&&c.fetcher("/bookmarks/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({state:!1,object_type:"affair",object_id:n})}).then((function(n){!1===n.state&&r()}))}(t)},children:(0,s.jsx)(I.Z,{fontSize:"inherit"})}):i},l=function(n){return!(!o||!["bookmarked"].includes(n))};return(0,s.jsx)(N.Z,{children:(0,s.jsx)(O.Z,{children:(0,s.jsxs)(B.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,s.jsx)(R.Z,{children:(0,s.jsx)(q.Z,{children:H.map((function(n){return l(n.id)?null:(0,s.jsx)(F.Z,{align:n.align,sx:{minWidth:n.minWidth},children:n.label},n.id)}))})}),(0,s.jsx)(T.Z,{children:!i&&e.map((function(n,e){return(0,s.jsx)(q.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:H.map((function(e,i){return l(e.id)?null:(0,s.jsx)(F.Z,{align:e.align,sx:{verticalAlign:"top"},children:d(n,e.id)},e.id)}))},n.code)}))})]})})})};function U(n){n=null!==n?n:(0,r.Z)(new TypeError("Cannot destructure undefined"));var e,i,c=(0,t.Z)(o.useState("table"),2),b=c[0],v=c[1],w=(0,o.useRef)(null),k=(0,p.gm)("bookmarked-desc",100),_=k.results,y=k.isLoading,z=k.mutate,S=k.size,C=k.setSize,E=k.isLoadingMore,L=k.isReachingEnd,W=function(){z()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(x.Z,{direction:"row",justifyContent:"flex-end",spacing:2,sx:{pt:3,pb:3},children:[(0,s.jsxs)(f.Z,{size:"small",value:b,exclusive:!0,onChange:function(n,e){v(e)},"aria-label":"Platform",children:[(0,s.jsx)(j.Z,{value:"table","aria-label":"centered",children:(0,s.jsx)(u.Z,{fontSize:"10px"})}),(0,s.jsx)(j.Z,{value:"cards","aria-label":"left aligned",children:(0,s.jsx)(l.Z,{fontSize:"10px"})})]}),(0,s.jsx)(d(),{trigger:function(){return(0,s.jsx)(m.Z,{variant:"outlined",size:"small",color:"info",endIcon:(0,s.jsx)(h.Z,{}),children:"Print"})},content:function(){return w.current}})]}),(0,s.jsx)(P,{ref:w,children:(0,s.jsx)(Q,{affairs:y?[]:(e=[]).concat.apply(e,(0,a.Z)(_)),isLoading:y,print:!0})}),"table"==b?(0,s.jsx)(Q,{affairs:y?[]:(i=[]).concat.apply(i,(0,a.Z)(_)),isLoading:y,onBookmarkChange:W}):(0,s.jsx)(g.ZP,{container:!0,spacing:4,children:!y&&(0,s.jsxs)(s.Fragment,{children:[_.map((function(n){return n.map((function(n,e){return(0,s.jsx)(g.ZP,{item:!0,md:3,children:(0,s.jsx)(Z.Z,{affair:n,onBookmarkChange:W})},"".concat(n.id,"-").concat(e))}))})),(0,s.jsx)(g.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",sx:{p:5},children:(0,s.jsx)(m.Z,{onClick:function(){return C(S+1)},disabled:E||L,children:E?"Loading...":L?"":"Load more"})})]})})]})}U.acl={action:"read",subject:"acl-page"};var V=U}},function(n){n.O(0,[143,411,657,482,774,888,179],(function(){return e=3007,n(n.s=e);var e}));var e=n.O();_N_E=e}]);