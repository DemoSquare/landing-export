(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82],{96607:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/votes/[id]",function(){return t(52122)}])},52122:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return G}});var i=t(26042),r=t(69396),o=t(99534),s=t(29815),a=t(85893),c=t(41664),l=t.n(c),u=t(11163),x=t(67294),d=t(86467),h=t(81216),f=t(24238),p=t(11496),m=t(69661),j=t(87357),v=t(67720),Z=t(94054),g=t(86886),_=t(22224),b=t(55113),w=t(18360),y=t(26447),P=t(7906),C=t(295),F=t(53252),W=t(72882),S=t(53184),k=t(53816),z=t(15861),H=t(8100),I=t(83276);var L=t(41800),A=t(11303),E=t(6757),N=t(36810),B=t(60058),D=t(80703),T=(0,p.ZP)(z.Z)({fontWeight:500,fontSize:"18px",lineHeight:"24px",color:"#000000"}),R=(0,p.ZP)(z.Z)({fontWeight:500,fontSize:"12px",lineHeight:"16px",color:"#9FABC6"}),Y=(0,p.ZP)(z.Z)({fontWeight:500,fontSize:"18px",lineHeight:"14px",color:"#000000"}),O=(0,p.ZP)(j.Z)({width:"100%"}),M=(0,p.ZP)(z.Z)({fontWeight:400,fontSize:"12px",lineHeight:"16px",color:"#60739F",textTransform:"uppercase"});function V(e){var n="/images/councillors/profile/".concat(e.councillor_id,".jpg"),t=e.councillor_first_name.charAt(0)+e.councillor_last_name.charAt(0);return(0,a.jsx)(m.Z,{alt:t,src:n})}var X=[{id:"avatar",label:"",minWidth:20},{id:"councillor_first_name",label:"first name",minWidth:100},{id:"councillor_last_name",label:"last name",minWidth:100},{id:"parl_group_name",label:"group",minWidth:100},{id:"canton_name",label:"canton",minWidth:100},{id:"vote_outcome",label:"vote",minWidth:200}];function q(e){var n=e.vote,t=(0,o.Z)(e,["vote"]);return(0,a.jsx)(F.Z,(0,r.Z)((0,i.Z)({},t),{children:(0,a.jsxs)(y.Z,{direction:"row",spacing:3,alignItems:"center",divider:(0,a.jsx)(v.Z,{orientation:"vertical",flexItem:!0}),children:["yes"==n.vote_outcome?(0,a.jsx)(A.r,{outcome:"yes"}):(0,a.jsx)(A.s,{outcome:"yes"}),"abstention"==n.vote_outcome?(0,a.jsx)(A.r,{outcome:"abstention"}):(0,a.jsx)(A.s,{outcome:"abstention"}),"no"==n.vote_outcome?(0,a.jsx)(A.r,{outcome:"no"}):(0,a.jsx)(A.s,{outcome:"no"})]})}))}function K(e){var n=e.vote,t=n.councillor_votes,i=(0,x.useState)(""),r=i[0],o=i[1],c=(0,x.useState)(""),u=c[0],d=c[1],f=(0,x.useState)([]),p=f[0],m=f[1];return(0,x.useEffect)((function(){var e=null===t||void 0===t?void 0:t.map((function(e){return e.parl_group_name}));m((0,s.Z)(new Set(e)))}),[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(y.Z,{direction:"row",sx:{py:6,display:"flex",justifyContent:"space-between"},children:[(0,a.jsx)(N.L,{onchange:function(e){o(e.target.value)}}),(0,a.jsx)(j.Z,{children:(0,a.jsx)(Z.Z,{fullWidth:!0,children:(0,a.jsxs)(w.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",color:"info",value:u,onChange:function(e){d(e.target.value)},IconComponent:null,inputProps:{"aria-label":"Without label"},displayEmpty:!0,renderValue:function(e){return(0,a.jsxs)(j.Z,{sx:{display:"flex",gap:1},children:[(0,a.jsx)(h.Z,{}),e||"All parties"]})},children:[(0,a.jsx)(_.Z,{value:"",children:(0,a.jsx)("em",{children:"All parties"})}),p.map((function(e){return(0,a.jsx)(_.Z,{value:e,children:e},e)}))]})})})]}),(0,a.jsx)(W.Z,{component:b.Z,sx:{maxHeight:440},children:(0,a.jsxs)(P.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,a.jsx)(S.Z,{children:(0,a.jsx)(k.Z,{children:X.map((function(e){return(0,a.jsx)(F.Z,{align:e.align,sx:{minWidth:e.minWidth},children:e.label},e.id)}))})}),(0,a.jsx)(C.Z,{children:null===t||void 0===t?void 0:t.filter((function(e){return function(e){return(!u||e.parl_group_name==u)&&!(r&&!(e.councillor_first_name.toLowerCase().includes(r.toLowerCase())||e.councillor_last_name.toLowerCase().includes(r.toLowerCase())||"".concat(e.councillor_first_name.toLowerCase()," ").concat(e.councillor_last_name.toLowerCase()).includes(r.toLowerCase())))}(e)})).map((function(e){return(0,a.jsx)(l(),{href:"/councillors/".concat(e.councillor_id),children:(0,a.jsx)(k.Z,{hover:!0,role:"checkbox",tabIndex:-1,sx:{cursor:"pointer"},children:X.map((function(n,t){var i=e[n.id];return"vote_outcome"===n.id?(0,a.jsx)(q,{vote:e,align:n.align},n.id):(0,a.jsx)(F.Z,{align:n.align,children:0==t?V(e):i},n.id)}))})},e.councillor_id)}))})]})}),(0,a.jsxs)(y.Z,{direction:"row",justifyContent:"flex-end",alignItems:"center",spacing:5,sx:{px:5,pr:16,height:50,borderTop:2,borderBottom:2,borderColor:"grey.200"},children:[(0,a.jsx)(M,{children:"Total"}),(0,a.jsxs)(y.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:3,divider:(0,a.jsx)(v.Z,{orientation:"vertical",flexItem:!0}),children:[(0,a.jsx)(L.Z,{variant:"mauve",label:n.yes_count,sx:{width:"52px"}}),(0,a.jsx)(L.Z,{variant:"ocean",label:n.abstention_count,sx:{width:"52px"}}),(0,a.jsx)(L.Z,{variant:"pink",label:n.no_count,sx:{width:"52px"}})]})]})]})}function U(){var e=(0,u.useRouter)(),n=function(e){var n=(0,I.a)(),t="/votes/".concat(e),i=(0,H.ZP)(t,n.fetcher),r=i.data;return{vote:r,isLoading:!r,isError:i.error}}(Number(e.query.id)),t=n.vote,i=n.isLoading;return(0,a.jsx)(a.Fragment,{children:!i&&t&&(0,a.jsxs)(g.ZP,{container:!0,children:[(0,a.jsx)(g.ZP,{item:!0,xs:12,children:(0,a.jsx)(E.Z,{value:t.vote_id,href:"/votes",label:"Votes"})}),(0,a.jsxs)(g.ZP,{sx:{backgroundColor:"white",p:9},container:!0,item:!0,xs:12,children:[(0,a.jsx)(g.ZP,{item:!0,xs:12,children:(0,a.jsx)(L.Z,{variant:"mauve",label:"National council"})}),(0,a.jsx)(g.ZP,{item:!0,sx:{mt:2},xs:12,md:6,children:(0,a.jsx)(T,{children:t.affair_title})}),(0,a.jsx)(O,{}),t.bill_title!==t.affair_title&&(0,a.jsx)(g.ZP,{item:!0,xs:12,children:(0,a.jsx)(R,{children:t.bill_title})}),(0,a.jsx)(g.ZP,{item:!0,sx:{mt:2},xs:12,children:(0,a.jsxs)(y.Z,{direction:"row",spacing:4,justifyContent:"flex-start",children:[(0,a.jsx)(D.Z,{label:"Affair",value:t.affair_short_number,icon:(0,a.jsx)(f.Z,{fontSize:"small"})}),(0,a.jsx)(D.Z,{label:"Date",value:t.vote_date,icon:(0,a.jsx)(d.Z,{fontSize:"small"})})]})}),(0,a.jsx)(g.ZP,{item:!0,sx:{mt:5},xs:12,children:(0,a.jsx)(B.Z,{vote:t})}),(0,a.jsxs)(g.ZP,{item:!0,sx:{mt:10},xs:12,children:[(0,a.jsx)(Y,{children:"Individual votes"}),(0,a.jsx)(K,{vote:t})]})]})]})})}U.acl={action:"read",subject:"acl-page"};var G=U},41800:function(e,n,t){"use strict";var i=t(26042),r=t(69396),o=t(99534),s=t(85893),a=t(41664),c=t.n(a),l=t(67294),u=t(87918),x=t(2734),d=t(91379),h=(0,l.forwardRef)((function(e,n){var t=e.variant,a=e.inline,l=e.label,h=e.href,f=void 0===h?void 0:h,p=(0,o.Z)(e,["variant","inline","label","href"]),m=(0,x.Z)();t||(t="default");var j={height:"23px",backgroundColor:m.palette[t][200],color:m.palette[t][800],fontWeight:500,lineHeight:"15px",fontSize:"12px",borderRadius:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"180px","&:hover":{cursor:f?"pointer":"cursor"}};return a&&(j.px=0,j.mx=1),p.sx&&(j=(0,i.Z)({},j,p.sx)),(0,s.jsx)(d.M,{condition:f,wrapper:function(e){return(0,s.jsx)(c(),{passHref:!0,href:f,children:e})},children:(0,s.jsx)(u.Z,(0,r.Z)((0,i.Z)({},p),{ref:n,label:l,sx:j}))})}));n.Z=h},11303:function(e,n,t){"use strict";t.d(n,{r:function(){return s},s:function(){return a}});var i=t(85893),r=t(87357),o=t(41800);function s(e){var n,t;switch(e.outcome.toLowerCase()){case"yes":n="Yes",t="mauve";break;case"no":n="No",t="pink";break;case"abstention":n="Abst",t="ocean"}return(0,i.jsx)(o.Z,{label:n,variant:t,sx:{width:"52px"}})}function a(e){var n=e.outcome;return n&&["yes","no","abstention"].includes(n.toLowerCase())?(0,i.jsx)(r.Z,{width:52,height:23}):null}},80703:function(e,n,t){"use strict";var i=t(85893),r=t(11496),o=t(87357),s=t(26447),a=t(15861),c=(0,r.ZP)(a.Z)({fontWeight:400,fontSize:"12px",lineHeight:"16px",color:"#60739F"}),l=(0,r.ZP)(a.Z)({fontWeight:400,fontSize:"13px",lineHeight:"16px",color:"#000000"}),u=(0,r.ZP)(o.Z)((function(e){return{fontSize:"3px",color:e.theme.palette.primary.main}}));n.Z=function(e){var n=e.icon,t=e.label,r=e.value,o=e.children;return(0,i.jsxs)(s.Z,{direction:"row",sx:{mb:3},children:[(0,i.jsx)(u,{children:n}),(0,i.jsxs)(s.Z,{direction:"column",sx:{ml:1},children:[(0,i.jsx)(c,{children:t}),o||(0,i.jsx)(l,{children:r})]})]})}},6757:function(e,n,t){"use strict";var i=t(85893),r=t(41664),o=t.n(r),s=t(97790),a=t(37958),c=t(50122),l=t(12963),u=t(83321),x=t(86886),d=t(26447),h=t(15861);function f(e){var n=e.value,t=e.href,r=e.label,s=[(0,i.jsx)(o(),{href:t,passHref:!0,children:(0,i.jsx)(c.Z,{color:"inherit",children:r})},1),(0,i.jsx)(h.Z,{color:"text.primary",children:n},2)];return(0,i.jsx)(l.Z,{separator:(0,i.jsx)(a.Z,{fontSize:"small"}),"aria-label":"breadcrumb",children:s})}n.Z=function(e){var n=e.value,t=e.href,r=e.label;return(0,i.jsxs)(x.ZP,{container:!0,spacing:1,alignItems:"center",sx:{mb:5},children:[(0,i.jsx)(x.ZP,{item:!0,xs:6,children:(0,i.jsx)(f,{value:n,href:t,label:r})}),(0,i.jsx)(x.ZP,{item:!0,xs:6,children:(0,i.jsx)(d.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:(0,i.jsx)(u.Z,{variant:"contained",startIcon:(0,i.jsx)(s.Z,{}),children:"Follow"})})})]})}},60058:function(e,n,t){"use strict";var i=t(85893),r=t(11496),o=t(87357),s=t(67720),a=t(26447),c=t(15861),l=t(11303),u=(0,r.ZP)(c.Z)({marginTop:5,fontWeight:600,fontSize:"12px",lineHeight:"10px",color:"#54658C",textAlign:"center"}),x=(0,r.ZP)(c.Z)({fontWeight:500,fontSize:"13px",lineHeight:"16px",color:"#000000"}),d=(0,r.ZP)(c.Z)({fontWeight:400,fontSize:"14px",lineHeight:"18px",color:"#60739F"}),h=(0,r.ZP)(c.Z)({fontWeight:600,fontSize:"14px",lineHeight:"20px",color:"#000000"}),f=(0,r.ZP)(c.Z)({fontWeight:300,fontSize:"14px",lineHeight:"20px",color:"#000000"});function p(e){var n=e.count;return(0,i.jsxs)(d,{children:["Excused/absent: ",n," councillors"]})}function m(e){var n=e.vote,t=e.variant,r=e.whiteBg,c={fontSize:"compact"===t?"12px":"14px",lineHeight:"compact"===t?"16px":"20px"},l={xs:"100%",md:"compact"===t?"100%":"33%"};return(0,i.jsx)(i.Fragment,{children:n.meaning_yes&&n.meaning_no&&(0,i.jsx)(o.Z,{backgroundColor:r?"#FFF":"#FAFBFF",p:4,sx:{maxWidth:l},children:(0,i.jsxs)(a.Z,{direction:"row",spacing:5,divider:(0,i.jsx)(s.Z,{orientation:"vertical",flexItem:!0}),children:[(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h,{sx:c,children:"Yes"}),(0,i.jsx)(f,{sx:c,children:n.meaning_yes})]}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h,{sx:c,children:"No"}),(0,i.jsx)(f,{sx:c,children:n.meaning_no})]})]})})})}function j(e){var n,t,r=e.value,s=e.width,a=e.type,c=e.variant,l="compact"===c?40:10;switch(a){case"yes":n="#8D91FF",t=r>l?"Yes: "+r:r;break;case"abstention":n="#A3E4F9",t=r>l?"Abst: "+r:r;break;case"no":n="#F9A3E1",t=r>l?"No: "+r:r}return(0,i.jsxs)(o.Z,{width:s,flexDirection:"column",children:[(0,i.jsx)(o.Z,{width:"100%",height:"compact"===c?12:20,backgroundColor:n,borderRadius:"3px"}),(0,i.jsx)(u,{children:t})]})}function v(e){var n=e.vote,t=e.variant,r=n.yes_count+n.abstention_count+n.no_count,s=n.absence_count+n.excused_count+n.did_not_participate_count;return(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(a.Z,{direction:"row",spacing:1,sx:{mb:2},children:[n.yes_count>0?(0,i.jsx)(j,{value:n.yes_count,width:n.yes_count/r,type:"yes",variant:t}):(0,i.jsx)(i.Fragment,{}),n.abstention_count?(0,i.jsx)(j,{value:n.abstention_count,width:n.abstention_count/r,type:"abstention",variant:t}):(0,i.jsx)(i.Fragment,{}),n.no_count?(0,i.jsx)(j,{value:n.no_count,width:n.no_count/r,type:"no",variant:t}):(0,i.jsx)(i.Fragment,{})]}),"compact"===t?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(p,{count:s})]})}n.Z=function(e){var n=e.vote,t=e.variant,r=void 0===t?"default":t,o=e.whiteBg,s=void 0!==o&&o,c=e.sx,u=void 0===c?{}:c,d=n.vote_result>.5?"Yes":"No",h=(100*n.vote_result).toFixed(0);return(0,i.jsxs)(a.Z,{direction:"column",spacing:"compact"===r?2:5,sx:u,children:[(0,i.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,i.jsx)(l.r,{outcome:d}),(0,i.jsxs)(x,{children:[h,"%",n.vote_title?" \u2013 "+n.vote_title:""]})]}),(0,i.jsx)(v,{vote:n,variant:r}),(0,i.jsx)(m,{vote:n,variant:r,whiteBg:s})]})}},91379:function(e,n,t){"use strict";function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-UK",t={year:"numeric",month:"long",day:"numeric"};return new Date(Date.parse(e)).toLocaleDateString(n,t)}function r(e){var n=e.condition,t=e.wrapper,i=e.children;return n?t(i):i}t.d(n,{M:function(){return r},p:function(){return i}})}},function(e){e.O(0,[411,43,774,888,179],(function(){return n=96607,e(e.s=n);var n}));var n=e.O();_N_E=n}]);